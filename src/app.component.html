<!-- Eye opening animation overlay -->
<div class="eye-animation-overlay"></div>

<div
  class="portfolio"
  [class.light-theme]="theme() === 'light'"
  [class.flashlight-theme]="theme() === 'flashlight'"
>
  <!-- Global floating particles -->
  <div class="global-particles" aria-hidden="true">
    @for (p of particles(); track p.id) {
      <span
        class="particle"
        [style.transform]="'translate(' + p.x + 'px, ' + p.y + 'px)'"
        [style.width.px]="p.size"
        [style.height.px]="p.size"
        [style.opacity]="p.opacity"
      ></span>
    }
  </div>

  <!-- Floating header -->
  <header class="header">
    <div class="header-inner">
      <div class="logo">
        <img
          class="logo-avatar"
          src="https://i.imgur.com/pm3YRsS.jpeg"
          alt="Lei profile photo"
          (click)="toggleAvatarZoom()"
          role="button"
          tabindex="0"
          (keydown.enter)="toggleAvatarZoom()"
        />
        <span class="logo-text">Leinard Artajo</span>
      </div>
      <div class="header-controls">
        <nav class="tab-nav" role="tablist">
          <button
            role="tab"
            [class.active]="activeTab() === 'about'"
            [attr.aria-selected]="activeTab() === 'about'"
            (click)="setTab('about')"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            About
          </button>
          <button
            role="tab"
            [class.active]="activeTab() === 'projects'"
            [attr.aria-selected]="activeTab() === 'projects'"
            (click)="setTab('projects')"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
              <line x1="8" y1="21" x2="16" y2="21" />
              <line x1="12" y1="17" x2="12" y2="21" />
            </svg>
            Projects
          </button>
          <button
            role="tab"
            [class.active]="activeTab() === 'tech'"
            [attr.aria-selected]="activeTab() === 'tech'"
            (click)="setTab('tech')"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="16 18 22 12 16 6" />
              <polyline points="8 6 2 12 8 18" />
            </svg>
            Tech
          </button>
          <button
            role="tab"
            [class.active]="activeTab() === 'contact'"
            [attr.aria-selected]="activeTab() === 'contact'"
            (click)="setTab('contact')"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
              />
              <polyline points="22,6 12,13 2,6" />
            </svg>
            Contact
          </button>
        </nav>
        <button
          class="theme-toggle"
          (click)="toggleTheme()"
          [attr.aria-label]="'Switch to ' + nextTheme()"
        >
          @if (theme() === "dark") {
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="4" />
              <path d="M12 2v2" />
              <path d="M12 20v2" />
              <path d="m4.93 4.93 1.41 1.41" />
              <path d="m17.66 17.66 1.41 1.41" />
              <path d="M2 12h2" />
              <path d="M20 12h2" />
              <path d="m6.34 17.66-1.41 1.41" />
              <path d="m19.07 4.93-1.41 1.41" />
            </svg>
          } @else if (theme() === "light") {
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
            </svg>
          } @else {
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M18 6 6 18" />
              <path d="m6 6 12 12" />
              <path d="M3 3h2l4 4L3 13V3z" />
              <path d="M21 21h-2l-4-4L21 11v10z" />
            </svg>
          }
        </button>
      </div>
    </div>
  </header>

  <!-- Main content area -->
  <main class="main">
    <!-- ABOUT TAB -->
    @if (activeTab() === "about") {
      <div class="tab-panel fade-in" role="tabpanel">
        <section class="hero">
          <div class="hero-badge">Full-Stack Developer</div>
          <h1 class="hero-name">Hi, I'm <span class="highlight">Lei</span></h1>
          <p class="hero-tagline">
            I build maintainable APIs and polished front-ends that solve real
            problems. Focused on Angular, TypeScript, ASP.NET Core, and SQL
            Server.
          </p>
          <div class="hero-actions">
            <button class="btn-primary" (click)="setTab('projects')">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                <line x1="8" y1="21" x2="16" y2="21" />
                <line x1="12" y1="17" x2="12" y2="21" />
              </svg>
              View Projects
            </button>
            <button class="btn-secondary" (click)="setTab('contact')">
              Get in Touch
            </button>
          </div>
        </section>

        <div class="stats-row">
          <div class="stat-card">
            <span class="stat-number">3+</span>
            <span class="stat-label">Years Experience</span>
          </div>
          <div class="stat-card">
            <span class="stat-number">10+</span>
            <span class="stat-label">Projects Delivered</span>
          </div>
          <div class="stat-card">
            <span class="stat-number">5+</span>
            <span class="stat-label">Technologies</span>
          </div>
        </div>

        <section class="about-detail">
          <h2 class="section-title">About Me</h2>
          <div class="about-grid">
            <div class="about-card">
              <div class="about-card-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="16 18 22 12 16 6" />
                  <polyline points="8 6 2 12 8 18" />
                </svg>
              </div>
              <h3>Front-End</h3>
              <p>
                Building responsive, component-driven UIs with Angular and
                TypeScript. Clean architecture, lazy loading, and reactive
                patterns.
              </p>
            </div>
            <div class="about-card">
              <div class="about-card-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect x="2" y="2" width="20" height="8" rx="2" ry="2" />
                  <rect x="2" y="14" width="20" height="8" rx="2" ry="2" />
                  <line x1="6" y1="6" x2="6.01" y2="6" />
                  <line x1="6" y1="18" x2="6.01" y2="18" />
                </svg>
              </div>
              <h3>Back-End</h3>
              <p>
                Designing RESTful APIs with ASP.NET Core, Entity Framework Core,
                and SQL Server. Secure, testable, and well-documented.
              </p>
            </div>
            <div class="about-card">
              <div class="about-card-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="3" />
                  <path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"
                  />
                </svg>
              </div>
              <h3>Integration</h3>
              <p>
                Connecting systems through third-party APIs, middleware, and
                data pipelines. ASP.NET Zero, payment gateways, and more.
              </p>
            </div>
          </div>
        </section>
      </div>
    }

    <!-- PROJECTS TAB -->
    @if (activeTab() === "projects") {
      <div class="tab-panel fade-in" role="tabpanel">
        <h2 class="section-title">Selected Projects</h2>
        <p class="section-subtitle">A few highlights from my recent work.</p>

        <div class="projects-grid">
          <article class="project-card">
            <div class="project-header">
              <div class="project-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                  <line x1="8" y1="21" x2="16" y2="21" />
                  <line x1="12" y1="17" x2="12" y2="21" />
                </svg>
              </div>
              <span class="project-type">Enterprise Web App</span>
            </div>
            <h3>HRMS Platform</h3>
            <p>
              A comprehensive Human Resource Management System to streamline HR
              processes, including employee data management, payroll, and
              performance tracking.
            </p>
            <div class="project-tags">
              <span>Angular</span>
              <span>ASP.NET Core</span>
              <span>SQL Server</span>
            </div>
          </article>

          <article class="project-card">
            <div class="project-header">
              <div class="project-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M12 2L2 7l10 5 10-5-10-5z" />
                  <path d="M2 17l10 5 10-5" />
                  <path d="M2 12l10 5 10-5" />
                </svg>
              </div>
              <span class="project-type">Web App</span>
            </div>
            <h3>HR201 Employee Portal</h3>
            <p>
              An internal web application for managing employee profiles, leave
              requests, and company documents, built on the robust ASP.NET Zero
              framework.
            </p>
            <div class="project-tags">
              <span>ASP.NET Zero</span>
              <span>Angular</span>
              <span>EF Core</span>
            </div>
          </article>

          <article class="project-card">
            <div class="project-header">
              <div class="project-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                  />
                  <polyline points="15 3 21 3 21 9" />
                  <line x1="10" y1="14" x2="21" y2="3" />
                </svg>
              </div>
              <span class="project-type">Web App</span>
            </div>
            <h3>Employee Self-Service (ESS) Portal</h3>
            <p>
              A dedicated self-service portal allowing employees to file
              Overtime and DTR, update personal information, and manage benefits
              securely and efficiently.
            </p>
            <div class="project-tags">
              <span>Angular</span>
              <span>REST API</span>
              <span>SQL Server</span>
            </div>
          </article>

          <article class="project-card">
            <div class="project-header">
              <div class="project-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
                  />
                </svg>
              </div>
              <span class="project-type">Full-Stack</span>
            </div>
            <h3>Point of Sale (POS) System</h3>
            <p>
              A full-featured Point of Sale system for retail with inventory
              management, sales reporting, and real-time transaction processing.
            </p>
            <div class="project-tags">
              <span>ASP.NET Core</span>
              <span>Angular</span>
              <span>EF Core</span>
            </div>
          </article>
        </div>
      </div>
    }

    <!-- TECH TAB -->
    @if (activeTab() === "tech") {
      <div class="tab-panel fade-in" role="tabpanel">
        <h2 class="section-title">Tech Stack</h2>
        <p class="section-subtitle">
          Technologies and tools I work with daily.
        </p>

        <div class="tech-section">
          <h3 class="tech-category-title">Front-End</h3>
          <div class="tech-grid">
            <div class="tech-card">
              <div class="tech-card-icon angular">Ng</div>
              <div class="tech-card-info">
                <strong>Angular</strong>
                <span>Component framework</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon typescript">TS</div>
              <div class="tech-card-info">
                <strong>TypeScript</strong>
                <span>Type-safe JavaScript</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon html">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polyline points="16 18 22 12 16 6" />
                  <polyline points="8 6 2 12 8 18" />
                </svg>
              </div>
              <div class="tech-card-info">
                <strong>HTML & CSS</strong>
                <span>Semantic markup & styling</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon rxjs">Rx</div>
              <div class="tech-card-info">
                <strong>RxJS</strong>
                <span>Reactive programming</span>
              </div>
            </div>
          </div>
        </div>

        <div class="tech-section">
          <h3 class="tech-category-title">Back-End</h3>
          <div class="tech-grid">
            <div class="tech-card">
              <div class="tech-card-icon dotnet">.N</div>
              <div class="tech-card-info">
                <strong>ASP.NET Core</strong>
                <span>Web API framework</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon efcore">EF</div>
              <div class="tech-card-info">
                <strong>Entity Framework Core</strong>
                <span>ORM & data access</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon sql">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <ellipse cx="12" cy="5" rx="9" ry="3" />
                  <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" />
                  <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" />
                </svg>
              </div>
              <div class="tech-card-info">
                <strong>SQL Server</strong>
                <span>Relational database</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon zero">AZ</div>
              <div class="tech-card-info">
                <strong>ASP.NET Zero</strong>
                <span>Enterprise boilerplate</span>
              </div>
            </div>
          </div>
        </div>

        <div class="tech-section">
          <h3 class="tech-category-title">Tools & Workflow</h3>
          <div class="tech-grid">
            <div class="tech-card">
              <div class="tech-card-icon git">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="18" cy="18" r="3" />
                  <circle cx="6" cy="6" r="3" />
                  <path d="M13 6h3a2 2 0 0 1 2 2v7" />
                  <line x1="6" y1="9" x2="6" y2="21" />
                </svg>
              </div>
              <div class="tech-card-info">
                <strong>Git</strong>
                <span>Version control</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon vs">VS</div>
              <div class="tech-card-info">
                <strong>Visual Studio</strong>
                <span>IDE</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon api">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                  />
                  <polyline points="15 3 21 3 21 9" />
                  <line x1="10" y1="14" x2="21" y2="3" />
                </svg>
              </div>
              <div class="tech-card-info">
                <strong>REST APIs</strong>
                <span>API integration</span>
              </div>
            </div>
            <div class="tech-card">
              <div class="tech-card-icon postman">PM</div>
              <div class="tech-card-info">
                <strong>Postman</strong>
                <span>API testing</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    }

    <!-- CONTACT TAB -->
    @if (activeTab() === "contact") {
      <div class="tab-panel fade-in" role="tabpanel">
        <h2 class="section-title">Get in Touch</h2>
        <p class="section-subtitle">
          Have a project in mind or want to collaborate? Let's talk.
        </p>

        <div class="contact-grid">
          <a href="mailto:zhylegaming@gmail.com" class="contact-card">
            <div class="contact-card-icon">
              <svg
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                />
                <polyline points="22,6 12,13 2,6" />
              </svg>
            </div>
            <h3>Email</h3>
            <p>zhylegaming&#64;gmail.com</p>
          </a>

          <a
            href="https://www.linkedin.com/in/leinard-artajo/"
            target="_blank"
            rel="noopener"
            class="contact-card"
          >
            <div class="contact-card-icon">
              <svg
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-4 0v7h-4v-7a6 6 0 0 1 6-6z"
                />
                <rect x="2" y="9" width="4" height="12" />
                <circle cx="4" cy="4" r="2" />
              </svg>
            </div>
            <h3>LinkedIn</h3>
            <p>/in/leinard-artajo</p>
          </a>

          <a
            href="https://github.com/syntaxerrrr"
            target="_blank"
            rel="noopener"
            class="contact-card"
          >
            <div class="contact-card-icon">
              <svg
                width="28"
                height="28"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
                />
              </svg>
            </div>
            <h3>GitHub</h3>
            <p>/syntaxerrrr</p>
          </a>
        </div>
      </div>
    }
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2026 Lei. Built with Angular.</p>
  </footer>

  <!-- Avatar zoom overlay -->
  @if (avatarZoomed()) {
    <div class="avatar-overlay" (click)="toggleAvatarZoom()">
      <img
        class="avatar-zoomed"
        src="https://i.imgur.com/pm3YRsS.jpeg"
        alt="Lei profile photo zoomed"
      />
    </div>
  }

  <!-- AI Chat Button -->
  <div class="chat-fab-container">
    @if (showChatTooltip() && !chatVisible()) {
      <div class="chat-tooltip" role="tooltip">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
          <line x1="9" y1="9" x2="9.01" y2="9"></line>
          <line x1="15" y1="9" x2="15.01" y2="9"></line>
        </svg>
        Need help? Chat with me...
      </div>
    }
    <button
      class="chat-fab"
      (click)="toggleChat()"
      aria-label="Open AI Assistant"
    >
      <svg
        width="28"
        height="28"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z" />
      </svg>
    </button>
  </div>

  <!-- AI Chat Widget -->
  @if (chatVisible()) {
    <div class="chat-overlay" (click)="toggleChat()">
      <div
        class="chat-widget"
        [class.visible]="chatVisible()"
        (click)="$event.stopPropagation()"
      >
        <header class="chat-header">
          <div class="chat-header-info">
            <div class="chat-header-avatar">
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                <line x1="9" y1="9" x2="9.01" y2="9"></line>
                <line x1="15" y1="9" x2="15.01" y2="9"></line>
              </svg>
            </div>
            <div>
              <h3 class="chat-header-title">Lei's AI Assistant</h3>
              <p class="chat-header-status">Online</p>
            </div>
          </div>
          <button
            (click)="toggleChat()"
            class="chat-close-btn"
            aria-label="Close chat"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2.5"
            >
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </header>

        <div class="chat-messages">
          @for (message of chatMessages(); track message) {
            <div
              class="chat-message"
              [class.user]="message.sender === 'user'"
              [class.ai]="message.sender === 'ai'"
            >
              @if (message.sender === "ai") {
                <div class="chat-avatar">
                  <svg
                    width="22"
                    height="22"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                  </svg>
                </div>
              }
              <p>{{ message.text }}</p>
            </div>
          }
          @if (isLoading()) {
            <div class="chat-message ai">
              <div class="chat-avatar">
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                  <line x1="9" y1="9" x2="9.01" y2="9"></line>
                  <line x1="15" y1="9" x2="15.01" y2="9"></line>
                </svg>
              </div>
              <div class="typing-indicator">
                <span></span><span></span><span></span>
              </div>
            </div>
          }
        </div>

        <footer class="chat-footer">
          @if (!isBlocked()) {
            <form
              class="chat-form"
              (submit)="$event.preventDefault(); sendMessage()"
            >
              <input
                type="text"
                class="chat-input"
                placeholder="Ask about my projects..."
                [value]="userInput()"
                (input)="userInput.set($any($event.target).value)"
              />
              <button
                type="submit"
                class="chat-send-btn"
                aria-label="Send message"
                [disabled]="!userInput().trim() || isLoading()"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2.5"
                >
                  <line x1="22" y1="2" x2="11" y2="13" />
                  <polygon points="22 2 15 22 11 13 2 9 22 2" />
                </svg>
              </button>
            </form>
          } @else {
            <div class="chat-blocked-message">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>
              </svg>
              <span>Chat blocked due to off-topic questions.</span>
            </div>
          }
        </footer>
      </div>
    </div>
  }
</div>
